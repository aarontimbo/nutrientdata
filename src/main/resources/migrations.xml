<?xml version="1.0" encoding="ISO-8859-1"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">

    <!--<changeSet author="ast (generated)" id="1370402366850-1">
        <createTable tableName="food_description">
            <column name="id" type="INT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="food_group_id" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="long_description" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="short_description" type="VARCHAR(60)">
                <constraints nullable="false"/>
            </column>
            <column name="common_name" type="VARCHAR(100)"/>
            <column name="manufactuer_name" type="VARCHAR(65)"/>
        </createTable>
    </changeSet>
    <changeSet author="ast (generated)" id="1370402366850-2">
        <createTable tableName="food_group">
            <column name="id" type="INT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="description" type="VARCHAR(60)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="ast (generated)" id="1370402366850-3">
        <addForeignKeyConstraint baseColumnNames="food_group_id" baseTableName="food_description" baseTableSchemaName="usda_sr25" constraintName="food_group_FK" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="food_group" referencedTableSchemaName="usda_sr25" referencesUniqueColumn="false"/>
    </changeSet>
    <changeSet author="ast (generated)" id="1370402366850-4">
        <createIndex indexName="description_UNIQUE" tableName="food_group" unique="true">
            <column name="description"/>
        </createIndex>
    </changeSet> -->

    <changeSet id="add-food-nutrient-table" author="ast">
        <createTable tableName="food_nutrient">
            <column name="food_id" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="nutrient_id" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="amount_per_100_grams" type="float(13,3)">
                <constraints nullable="false"/>
            </column>
            <column name="data_points" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="standard_error" type="float(11,3)"/>
            <column name="source_code" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="derivation_code" type="varchar(4)"/>
            <column name="ndb_number" type="INT"/>
            <column name="add_nutr_mark" type="varchar(1)"/>
            <column name="studies" type="INT"/>
            <column name="minimum_value" type="float(13,3)"/>
            <column name="maximum_value" type="float(13,3)"/>
            <column name="degrees_of_freedom" type="INT"/>
            <column name="low_eb" type="float(13,3)"/>
            <column name="up_eb" type="float(13,3)"/>
            <column name="statistical_comments" type="text"/>
            <column name="date_created" type="varchar(10)"/>
            <column name="confidence_code" type="varchar(1)"/>
        </createTable>
    </changeSet>
    <changeSet author="ast" id="addPrimaryKey-food-nutrient">
        <addPrimaryKey columnNames="food_id, nutrient_id"
                       constraintName="pk_food_nutrient"
                       tableName="food_nutrient"/>
    </changeSet>
</databaseChangeLog>